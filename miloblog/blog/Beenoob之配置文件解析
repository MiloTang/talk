  
	<pre style="background-color:#fdf6e3;color:#586e75;font-family:'Source Code Pro';font-size:13.5pt;"><span style="color:#dc322f;">&lt;?php<br></span><span style="color:#859900;">namespace </span><span style="color:#839496;">Core</span>\<span style="color:#839496;">libs</span>;<br><span style="color:#839496;">defined</span>(<span style="color:#2aa198;">'CORE_PATH'</span>) <span style="color:#859900;">or exit</span>();<br><span style="color:#859900;">class </span><span style="color:#b58900;">Conf<br></span><span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">    </span><span style="color:#859900;">private static </span><span style="color:#d33682;">$_conf</span>;<br>    <span style="color:#859900;">private static </span><span style="color:#d33682;">$_instance</span>;<br>    <span style="color:#859900;">private function </span><span style="color:#839496;">__construct</span>()<br>    <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;"><br></span><span style="color:#dc322f;">    }<br></span><span style="color:#dc322f;">    </span><span style="color:#859900;">public static  function </span><span style="color:#839496;">getInstance</span>()<br>    <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">        </span><span style="color:#859900;">if </span>(<span style="color:#079a71;">!</span>(<span style="color:#859900;">self</span><span style="color:#079a71;">::</span><span style="color:#d33682;">$_instance </span><span style="color:#859900;">instanceof </span><span style="color:#b58900;">self</span>)) <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">            </span><span style="color:#859900;">self</span><span style="color:#079a71;">::</span><span style="color:#d33682;">$_instance </span><span style="color:#079a71;">= </span><span style="color:#859900;">new self</span>();<br>        <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;">        </span><span style="color:#859900;">return self</span><span style="color:#079a71;">::</span><span style="color:#d33682;">$_instance</span>;<br>    <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;">    </span><span style="color:#859900;">private function </span><span style="color:#839496;">__clone</span>()<br>    <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;"><br></span><span style="color:#dc322f;">    }<br></span><span style="color:#dc322f;">    </span><span style="color:#859900;">static public function </span><span style="color:#839496;">conf</span>()<span style="color:#079a71;">:</span><span style="color:#859900;">array<br></span><span style="color:#859900;">    </span><span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">        </span><span style="color:#859900;">if </span>(<span style="color:#859900;">isset</span>(<span style="color:#859900;">self</span><span style="color:#079a71;">::</span><span style="color:#d33682;">$_conf</span><span style="color:#268bd2;">[</span><span style="color:#2aa198;">'conf'</span><span style="color:#268bd2;">]</span>))<br>        <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">            </span><span style="color:#859900;">return self</span><span style="color:#079a71;">::</span><span style="color:#d33682;">$_conf</span><span style="color:#268bd2;">[</span><span style="color:#2aa198;">'conf'</span><span style="color:#268bd2;">]</span>;<br>        <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;">        </span><span style="color:#859900;">else<br></span><span style="color:#859900;">        </span><span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">            </span><span style="color:#268bd2;">$file </span><span style="color:#079a71;">= </span><span style="color:#d33682;">WEB_PATH </span><span style="color:#079a71;">. </span><span style="color:#2aa198;">'Common/Config/Config.php'</span>;<br>            <span style="color:#859900;">if </span>(<span style="color:#839496;">is_file</span>(<span style="color:#268bd2;">$file</span>)) <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">                </span><span style="color:#268bd2;">$conf </span><span style="color:#079a71;">= </span><span style="color:#859900;">require_once </span><span style="color:#268bd2;">$file </span><span style="color:#079a71;">. </span><span style="color:#2aa198;">''</span>;<br>                <span style="color:#859900;">self</span><span style="color:#079a71;">::</span><span style="color:#d33682;">$_conf</span><span style="color:#268bd2;">[</span><span style="color:#2aa198;">'conf'</span><span style="color:#268bd2;">] </span><span style="color:#079a71;">= </span><span style="color:#268bd2;">$conf</span>;<br>                <span style="color:#859900;">return self</span><span style="color:#079a71;">::</span><span style="color:#d33682;">$_conf</span><span style="color:#268bd2;">[</span><span style="color:#2aa198;">'conf'</span><span style="color:#268bd2;">]</span>;<br>            <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;">            </span><span style="color:#859900;">else<br></span><span style="color:#859900;">            </span><span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">                </span><span style="color:#268bd2;">$file </span><span style="color:#079a71;">= </span><span style="color:#d33682;">CORE_PATH </span><span style="color:#079a71;">. </span><span style="color:#2aa198;">'Common/Config/Config.php'</span>;<br>                <span style="color:#859900;">if </span>(<span style="color:#839496;">is_file</span>(<span style="color:#268bd2;">$file</span>)) <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">                    </span><span style="color:#268bd2;">$conf </span><span style="color:#079a71;">= </span><span style="color:#859900;">require_once </span><span style="color:#268bd2;">$file </span><span style="color:#079a71;">. </span><span style="color:#2aa198;">''</span>;<br>                    <span style="color:#859900;">self</span><span style="color:#079a71;">::</span><span style="color:#d33682;">$_conf</span><span style="color:#268bd2;">[</span><span style="color:#2aa198;">'conf'</span><span style="color:#268bd2;">] </span><span style="color:#079a71;">= </span><span style="color:#268bd2;">$conf</span>;<br>                    <span style="color:#859900;">return self</span><span style="color:#079a71;">::</span><span style="color:#d33682;">$_conf</span><span style="color:#268bd2;">[</span><span style="color:#2aa198;">'conf'</span><span style="color:#268bd2;">]</span>;<br>                <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;">                </span><span style="color:#859900;">else<br></span><span style="color:#859900;">                </span><span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">                    </span><span style="color:#839496;">GetError</span>(<span style="color:#2aa198;">'</span><span style="color:#2aa198;font-family:'Courier New';">配置文件不存在</span><span style="color:#2aa198;">' </span><span style="color:#079a71;">. </span><span style="color:#2aa198;">'conf'</span>);<br>                <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;">            }<br></span><span style="color:#dc322f;">        }<br></span><span style="color:#dc322f;">        </span><span style="color:#859900;">return null</span>;<br>    <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;">}</span></pre>