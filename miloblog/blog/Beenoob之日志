  
	<pre style="background-color:#fdf6e3;color:#586e75;font-family:'Source Code Pro';font-size:13.5pt;"><span style="color:#dc322f;">&lt;?php<br></span><span style="color:#859900;">namespace </span><span style="color:#839496;">Core</span>\<span style="color:#839496;">libs</span>;<br><span style="color:#839496;">defined</span>(<span style="color:#2aa198;">'CORE_PATH'</span>) <span style="color:#859900;">or exit</span>();<br><span style="color:#859900;">use </span><span style="color:#839496;">Core</span>\<span style="color:#839496;">libs</span>\<span style="color:#839496;">drive</span>\<span style="color:#839496;">log</span>\<span style="color:#839496;">FileLog</span>;<br><span style="color:#859900;">use </span><span style="color:#839496;">Core</span>\<span style="color:#839496;">libs</span>\<span style="color:#839496;">drive</span>\<span style="color:#839496;">log</span>\<span style="color:#839496;">MysqlLog</span>;<br><br><span style="color:#859900;">class </span><span style="color:#b58900;">Log<br></span><span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">    </span><span style="color:#859900;">private static </span><span style="color:#d33682;">$_class</span>;<br>    <span style="color:#859900;">private static </span><span style="color:#d33682;">$_instance</span>;<br>    <span style="color:#859900;">private function </span><span style="color:#839496;">__construct</span>()<br>    <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">    }<br></span><span style="color:#dc322f;">    </span><span style="color:#859900;">public static function </span><span style="color:#839496;">getInstance</span>()<br>    <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">        </span><span style="color:#859900;">if </span>(<span style="color:#079a71;">!</span>(<span style="color:#859900;">self</span><span style="color:#079a71;">::</span><span style="color:#d33682;">$_instance </span><span style="color:#859900;">instanceof </span><span style="color:#b58900;">self</span>)) <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">            </span><span style="color:#859900;">self</span><span style="color:#079a71;">::</span><span style="color:#d33682;">$_instance </span><span style="color:#079a71;">= </span><span style="color:#859900;">new self</span>();<br>        <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;">        </span><span style="color:#859900;">return self</span><span style="color:#079a71;">::</span><span style="color:#d33682;">$_instance</span>;<br>    <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;">    </span><span style="color:#859900;">private function </span><span style="color:#839496;">__clone</span>()<br>    <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;"><br></span><span style="color:#dc322f;">    }<br></span><span style="color:#dc322f;">    </span><span style="color:#859900;">public static function </span><span style="color:#839496;">log</span>(<span style="color:#839496;">string $message</span>,<span style="color:#839496;">string $name</span><span style="color:#079a71;">=</span><span style="color:#2aa198;">'error_log'</span>)<br>    <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">        </span><span style="color:#268bd2;">$type</span><span style="color:#079a71;">=</span><span style="color:#859900;">isset</span>(<span style="color:#b58900;">Conf</span><span style="color:#079a71;">::</span><span style="color:#969483;">getInstance</span>()<span style="color:#079a71;">-&gt;</span><span style="color:#839496;">conf</span>()<span style="color:#268bd2;">[</span><span style="color:#2aa198;">'LOG'</span><span style="color:#268bd2;">]</span>)<span style="color:#079a71;">?</span><span style="color:#b58900;">Conf</span><span style="color:#079a71;">::</span><span style="color:#969483;">getInstance</span>()<span style="color:#079a71;">-&gt;</span><span style="color:#839496;">conf</span>()<span style="color:#268bd2;">[</span><span style="color:#2aa198;">'LOG'</span><span style="color:#268bd2;">]</span><span style="color:#079a71;">:</span><span style="color:#2aa198;">'file'</span>;<br>        <span style="color:#859900;">if </span>(<span style="color:#839496;">strtolower</span>(<span style="color:#268bd2;">$type</span>)<span style="color:#079a71;">==</span><span style="color:#2aa198;">'file'</span>)<br>        <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">            </span><span style="color:#859900;">self</span><span style="color:#079a71;">::</span><span style="color:#d33682;">$_class</span><span style="color:#079a71;">=</span><span style="color:#b58900;">FileLog</span><span style="color:#079a71;">::</span><span style="color:#969483;">getInstance</span>();<br>        <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;">        </span><span style="color:#859900;">elseif</span>(<span style="color:#839496;">strtolower</span>(<span style="color:#268bd2;">$type</span>)<span style="color:#079a71;">==</span><span style="color:#2aa198;">'mysql'</span>)<br>        <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">            </span><span style="color:#859900;">self</span><span style="color:#079a71;">::</span><span style="color:#d33682;">$_class</span><span style="color:#079a71;">=</span><span style="color:#b58900;">MysqlLog</span><span style="color:#079a71;">::</span><span style="color:#969483;">getInstance</span>();<br>        <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;">        </span><span style="color:#859900;">else<br></span><span style="color:#859900;">        </span><span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">            </span><span style="color:#859900;">exit</span>(<span style="color:#2aa198;">'</span><span style="color:#2aa198;font-family:'Courier New';">不支持</span><span style="color:#2aa198;">'</span><span style="color:#079a71;">.</span><span style="color:#268bd2;">$type</span><span style="color:#079a71;">.</span><span style="color:#2aa198;">'</span><span style="color:#2aa198;font-family:'Courier New';">类型</span><span style="color:#2aa198;">log'</span>);<br>        <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;">        </span><span style="color:#859900;">self</span><span style="color:#079a71;">::</span><span style="color:#d33682;">$_class</span><span style="color:#079a71;">-&gt;</span><span style="color:#839496;">log</span>(<span style="color:#839496;">$message</span>,<span style="color:#839496;">strtolower</span>(<span style="color:#839496;">$name</span>));<br>    <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;">}</span></pre>