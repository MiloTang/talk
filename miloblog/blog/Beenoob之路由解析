<pre style="background-color:#fdf6e3;color:#586e75;font-family:'Source Code Pro';font-size:13.5pt;"><span style="color:#dc322f;">&lt;?php<br></span><span style="color:#859900;">namespace </span><span style="color:#839496;">Core</span>\<span style="color:#839496;">Libs</span>;<br><span style="color:#839496;">defined</span>(<span style="color:#2aa198;">'CORE_PATH'</span>) <span style="color:#859900;">or exit</span>();<br><br><span style="color:#93a1a1;font-style:italic;">/**<br></span><span style="color:#93a1a1;font-style:italic;"> * Class Route<br></span><span style="color:#93a1a1;font-style:italic;"> * </span><span style="color:#93a1a1;font-weight:bold;font-style:italic;">@package </span><span style="color:#93a1a1;font-style:italic;">Core\Libs<br></span><span style="color:#93a1a1;font-style:italic;"> */<br></span><span style="color:#859900;">class </span><span style="color:#b58900;">Route<br></span><span style="color:#dc322f;">{<br></span><span style="color:#dc322f;"><br></span><span style="color:#dc322f;">   </span><span style="color:#859900;">private </span><span style="color:#6c71c4;">$_control </span><span style="color:#079a71;">= </span><span style="color:#2aa198;">'index'</span>;<br>   <span style="color:#859900;">private </span><span style="color:#6c71c4;">$_action </span><span style="color:#079a71;">= </span><span style="color:#2aa198;">'index'</span>;<br>   <span style="color:#859900;">private </span><span style="color:#6c71c4;">$_params </span><span style="color:#079a71;">= </span><span style="color:#859900;">array</span>();<br>   <span style="color:#859900;">private static </span><span style="color:#d33682;">$_instance</span>;<br><br>   <span style="color:#859900;">public static function </span><span style="color:#839496;">getInstance</span>()<br>   <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">      </span><span style="color:#859900;">if </span>(<span style="color:#079a71;">!</span>(<span style="color:#859900;">self</span><span style="color:#079a71;">::</span><span style="color:#d33682;">$_instance </span><span style="color:#859900;">instanceof </span><span style="color:#b58900;">self</span>)) <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">         </span><span style="color:#859900;">self</span><span style="color:#079a71;">::</span><span style="color:#d33682;">$_instance </span><span style="color:#079a71;">= </span><span style="color:#859900;">new self</span>();<br>      <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;">      </span><span style="color:#859900;">return self</span><span style="color:#079a71;">::</span><span style="color:#d33682;">$_instance</span>;<br>   <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;"><br></span><span style="color:#dc322f;">   </span><span style="color:#859900;">private function </span><span style="color:#839496;">__clone</span>()<br>   <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;"><br></span><span style="color:#dc322f;">   }<br></span><span style="color:#dc322f;"><br></span><span style="color:#dc322f;">   </span><span style="color:#93a1a1;font-style:italic;">/**<br></span><span style="color:#93a1a1;font-style:italic;">    * Route constructor.<br></span><span style="color:#93a1a1;font-style:italic;">    * </span><span style="color:#93a1a1;font-style:italic;font-family:'Courier New';">根据</span><span style="color:#93a1a1;font-style:italic;">/</span><span style="color:#93a1a1;font-style:italic;font-family:'Courier New';">拆分</span><span style="color:#93a1a1;font-style:italic;">url<br></span><span style="color:#93a1a1;font-style:italic;">    */<br></span><span style="color:#93a1a1;font-style:italic;">   </span><span style="color:#859900;">private function </span><span style="color:#839496;">__construct</span>()<br>   <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">      </span><span style="color:#859900;">if </span>(<span style="color:#859900;">isset</span>(<span style="color:#268bd2;">$_SERVER[</span><span style="color:#2aa198;">'REQUEST_URI'</span><span style="color:#268bd2;">]</span>) <span style="color:#079a71;">&amp;&amp; </span><span style="color:#268bd2;">$_SERVER[</span><span style="color:#2aa198;">'REQUEST_URI'</span><span style="color:#268bd2;">] </span><span style="color:#079a71;">!= </span><span style="color:#2aa198;">'/'</span>) <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">         </span><span style="color:#268bd2;">$uri </span><span style="color:#079a71;">= </span><span style="color:#839496;">OutUrl</span>(<span style="color:#839496;">trim</span>(<span style="color:#268bd2;">$_SERVER[</span><span style="color:#2aa198;">'REQUEST_URI'</span><span style="color:#268bd2;">]</span>, <span style="color:#2aa198;">'/'</span>));<br>         <span style="color:#268bd2;">$uriArr </span><span style="color:#079a71;">= </span><span style="color:#839496;">explode</span>(<span style="color:#2aa198;">'/'</span>, <span style="color:#839496;">trim</span>(<span style="color:#268bd2;">$uri</span>, <span style="color:#2aa198;">'/'</span>));<br>         <span style="color:#859900;">if </span>(<span style="color:#859900;">isset</span>(<span style="color:#268bd2;">$uriArr[</span><span style="color:#2aa198;">0</span><span style="color:#268bd2;">]</span>) <span style="color:#079a71;">&amp;&amp; </span><span style="color:#268bd2;">$uriArr[</span><span style="color:#2aa198;">0</span><span style="color:#268bd2;">] </span><span style="color:#079a71;">!= </span><span style="color:#2aa198;">''</span>) <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">            </span><span style="color:#268bd2;">$this</span><span style="color:#079a71;">-&gt;</span><span style="color:#6c71c4;">_control </span><span style="color:#079a71;">= </span><span style="color:#268bd2;">$uriArr[</span><span style="color:#2aa198;">0</span><span style="color:#268bd2;">]</span>;<br>         <span style="color:#dc322f;">} </span><span style="color:#859900;">else </span><span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">            </span><span style="color:#268bd2;">$this</span><span style="color:#079a71;">-&gt;</span><span style="color:#6c71c4;">_control </span><span style="color:#079a71;">= </span><span style="color:#2aa198;">'index'</span>;<br>         <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;">         </span><span style="color:#859900;">if </span>(<span style="color:#859900;">isset</span>(<span style="color:#268bd2;">$uriArr[</span><span style="color:#2aa198;">1</span><span style="color:#268bd2;">]</span>)) <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">            </span><span style="color:#268bd2;">$this</span><span style="color:#079a71;">-&gt;</span><span style="color:#6c71c4;">_action </span><span style="color:#079a71;">= </span><span style="color:#268bd2;">$uriArr[</span><span style="color:#2aa198;">1</span><span style="color:#268bd2;">]</span>;<br>         <span style="color:#dc322f;">} </span><span style="color:#859900;">else </span><span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">            </span><span style="color:#268bd2;">$this</span><span style="color:#079a71;">-&gt;</span><span style="color:#6c71c4;">_action </span><span style="color:#079a71;">= </span><span style="color:#2aa198;">'index'</span>;<br>         <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;">         </span><span style="color:#859900;">if </span>(<span style="color:#859900;">isset</span>(<span style="color:#268bd2;">$uriArr[</span><span style="color:#2aa198;">2</span><span style="color:#268bd2;">]</span>)) <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">            </span><span style="color:#268bd2;">$count </span><span style="color:#079a71;">= </span><span style="color:#839496;">count</span>(<span style="color:#268bd2;">$uriArr</span>);<br>            <span style="color:#859900;">for </span>(<span style="color:#268bd2;">$i </span><span style="color:#079a71;">= </span><span style="color:#2aa198;">2</span>; <span style="color:#268bd2;">$i </span><span style="color:#079a71;">&lt; </span><span style="color:#268bd2;">$count</span>; <span style="color:#268bd2;">$i</span><span style="color:#079a71;">++</span>) <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">               </span><span style="color:#859900;">if </span>(<span style="color:#859900;">isset</span>(<span style="color:#268bd2;">$uriArr[$i </span><span style="color:#079a71;">+ </span><span style="color:#2aa198;">1</span><span style="color:#268bd2;">]</span>)) <span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">                  </span><span style="color:#268bd2;">$this</span><span style="color:#079a71;">-&gt;</span><span style="color:#6c71c4;">_params</span><span style="color:#268bd2;">[$uriArr[$i]] </span><span style="color:#079a71;">= </span><span style="color:#268bd2;">$uriArr[$i </span><span style="color:#079a71;">+ </span><span style="color:#2aa198;">1</span><span style="color:#268bd2;">]</span>;<br>               <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;">               </span><span style="color:#268bd2;">$i</span><span style="color:#079a71;">++</span>;<br>            <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;">         } </span><span style="color:#859900;">else </span><span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">            </span><span style="color:#268bd2;">$this</span><span style="color:#079a71;">-&gt;</span><span style="color:#6c71c4;">_params </span><span style="color:#079a71;">= </span><span style="color:#859900;">array</span>();<br>         <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;">      }<br></span><span style="color:#dc322f;"><br></span><span style="color:#dc322f;">   }<br></span><span style="color:#dc322f;"><br></span><span style="color:#dc322f;">   </span><span style="color:#859900;">public function </span><span style="color:#839496;">getControl</span>()<span style="color:#079a71;">:</span><span style="color:#839496;">string<br></span><span style="color:#839496;">   </span><span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">      </span><span style="color:#859900;">return </span><span style="color:#268bd2;">$this</span><span style="color:#079a71;">-&gt;</span><span style="color:#6c71c4;">_control</span>;<br>   <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;"><br></span><span style="color:#dc322f;">   </span><span style="color:#859900;">public function </span><span style="color:#839496;">getAction</span>()<span style="color:#079a71;">:</span><span style="color:#839496;">string<br></span><span style="color:#839496;">   </span><span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">      </span><span style="color:#859900;">return </span><span style="color:#268bd2;">$this</span><span style="color:#079a71;">-&gt;</span><span style="color:#6c71c4;">_action</span>;<br>   <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;"><br></span><span style="color:#dc322f;">   </span><span style="color:#859900;">public function </span><span style="color:#839496;">getParams</span>()<span style="color:#079a71;">:</span><span style="color:#859900;">array<br></span><span style="color:#859900;">   </span><span style="color:#dc322f;">{<br></span><span style="color:#dc322f;">      </span><span style="color:#859900;">return </span><span style="color:#268bd2;">$this</span><span style="color:#079a71;">-&gt;</span><span style="color:#6c71c4;">_params</span>;<br>   <span style="color:#dc322f;">}<br></span><span style="color:#dc322f;"><br></span><span style="color:#dc322f;"><br></span><span style="color:#dc322f;">}</span></pre>